jQuery(document).ready((function (t) { function a(t) { return new URLSearchParams(window.location.search).get(t) } function e(t) { var a = new URLSearchParams(window.location.search); t ? a.set("article-topic", t) : a.delete("article-topic"); var e = window.location.pathname + (a.toString() ? "?" + a.toString() : ""); history.pushState(null, "", e) } function i(a, e) { var i = { action: "filter_articles", term_slug: a || "" }; return (e = e || {}).initial ? i.initial = 1 : (i.offset = e.offset || 0, i.posts_per_page = e.posts_per_page || 3), e.initial || t("#load-more").text("Loading..."), t.ajax({ url: articleAjax.ajax_url, type: "POST", dataType: "html", data: i }) } function o(a, e) { var i = t("<div>").html(a).find("article"), o = i.length; e ? t("#post-list").append(i) : t("#post-list").html(i), o < (e ? 3 : 9) ? t("#load-more").hide() : t("#load-more").show() } var n = a("article-topic"); n && i(n, { initial: !0 }).done((function (a) { o(a, !1), e(n), t("#load-more").attr("data-page", 1) })).fail((function () { t("#post-list").html("<p>Loading error</p>"), t("#load-more").hide() })); var r = t(".filter-nav__item"); t(document).on("click", ".filter-nav__item", (function (a) { a.preventDefault(); var n = t(this).data("term-slug") || "", l = t(this); e(n), t("#load-more").data("page", 1), i(n, { initial: !0 }).done((function (t) { o(t, !1), r.removeClass("active"), l.addClass("active") })).fail((function () { t("#post-list").html("<p>Error load</p>"), t("#load-more").hide() })) })), t(document).on("click", "#load-more", (function (e) { e.preventDefault(); var n = t(this), r = t("#post-list").find("article").length || 0; i(t(".filter-nav__item.active").data("term-slug") || a("article-topic") || "", { offset: r, posts_per_page: 3 }).done((function (t) { o(t, !0), n.text("Load More") })).fail((function () { n.text("Error") })) })) }));
